"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5310],{78548:function(e,l,t){var s=t(57437),a=t(49600),r=t(71460);t(2265);var n=t(80432),i=t(24942),o=t(47042);l.Z=e=>{let{fetching:l,reset:t}=e,d={...l&&{bgcolor:n.Z[500],"&:hover":{bgcolor:n.Z[800]}}};return(0,s.jsxs)(a.Z,{sx:{m:0,position:"relative"},children:[(0,s.jsx)(r.Z,{"aria-label":"save",color:"primary",sx:d,onClick:()=>t(),children:l?"Loading":(0,s.jsx)(i.Z,{})}),l&&(0,s.jsx)(o.Z,{size:71,sx:{color:n.Z[500],position:"absolute",top:0,left:0,zIndex:0}})]})}},21700:function(e,l,t){t.d(l,{Gn:function(){return d},Ox:function(){return c},bk:function(){return n},nS:function(){return selectChoosenUserProfile},nY:function(){return u},oP:function(){return i},os:function(){return o},uS:function(){return selectChoosenUser}});var s=t(50663);let a={id:0,username:"",role:"",first_name:"",last_name:"",created_at:"",last_login:"",is_active:!1,dept:null,matricle:"",about:"",sex:"",telephone:0,pob:"",dob:"",email:"",email_confirmed:!1},r={id:0,user:a,first_name:"",last_name:"",about:"",telephone:0,sex:"",pob:"",dob:"",email:"",title:"",updated_at:"",created_at:"",email_confirmed:!1},n=(0,s.oM)({name:"choosedUser",initialState:a,reducers:{addChoosenUser:(e,l)=>{let t=l.payload;return t},removeChoosenUser:()=>a}}),i=(0,s.oM)({name:"choosenUserProfile",initialState:r,reducers:{addChoosenUserProfile:(e,l)=>{let t=l.payload;return t},removeChoosenUserProfile:()=>r}}),{addChoosenUser:o,removeChoosenUser:d}=n.actions,{addChoosenUserProfile:c,removeChoosenUserProfile:u}=i.actions,selectChoosenUser=e=>e.choosenUser,selectChoosenUserProfile=e=>e.choosenUserProfile;n.reducer},85913:function(e,l,t){t.d(l,{mM:function(){return getIDsOfArrayOfObjects2Array},p6:function(){return formatDate}});let getIDsOfArrayOfObjects2Array=e=>null==e?void 0:e.map(e=>e.id),formatDate=e=>new Date(e.$d).toISOString().slice(0,10)},45310:function(e,l,t){t.r(l),t.d(l,{default:function(){return PageStudents_TableProfiles}});var s=t(57437),a=t(96507),r=t(38939),n=t(49600),i=t(71460),o=t(75897),d=t(53514),c=t(77370),u=t(80470),m=t(85269),h=t(57842),x=t(98075),f=t(63552),v=t(2265),p=t(44767),j=t(2879),Z=t(78548),b=t(80568),g=t(79404),_=t(43574),S=t(33071),y=t(45623),P=t(33116),w=t(48749),I=t(3198),N=t(37451),O=t(91678),C=t(85913),M=t(2278);let{Option:F}=y.default,{TextArea:E}=_.default;var Modals_EditProfileFormModal=e=>{var l;let{showModal:t,setShowModal:a,reset:r,record:n,userRole:i,adminRole:o}=e,[d,c]=(0,v.useState)([]),[u,m]=(0,v.useState)([]),[h,x]=(0,v.useState)([]),[f,Z]=(0,v.useState)(),[U,W]=(0,v.useState)(!1),A=(0,I.v9)(M.rk),[k]=g.Z.useForm(),[q,D]=(0,v.useState)(!1);(0,p.mC)(c,W),(0,p.Lh)(x,W),(0,v.useEffect)(()=>{m(d)},[d]),(0,v.useEffect)(()=>{let e=h.filter(e=>{var l;return e.id==(null==n?void 0:null===(l=n.level)||void 0===l?void 0:l.id)});e.length>0?Z(e[0]):Z(void 0)},[n,h]);let onSubmit=async e=>{if(void 0==e.first_name||""==e.first_name){if(null==n.first_name){P.ZP.error("First Name Blank !!!");return}n.first_name&&(e.first_name=n.first_name)}if(void 0==e.last_name||""==e.last_name){if(null==n.last_name){P.ZP.error("Last Name Blank !!!");return}n.last_name&&(e.last_name=n.last_name)}void 0===e.dob&&n.dob&&(e.dob=n.dob);try{e.dob=(0,C.p6)(e.dob)}catch(e){console.log(e)}"teacher"==i&&(""==e.title||void 0==e.title)&&n.title&&(e.title=n.title);let l={...e,user_id:n.user.id,role:i,updated_by_id:A.id,multiple:"student"==i};D(!0);let t=await (0,j.iK)({method:"put",url:N.Xx+"/"+n.id,payload:l,hasAuth:!0});D(!1),(null==t?void 0:t.data.success)&&(w.ZP.success({message:"Operation Successful",description:"Profile Updated Successfully"}),r(),a(!1),k.resetFields()),console.log(null==t?void 0:t.data),(null==t?void 0:t.data.errors)&&w.ZP.error({message:"Operation Failed",description:"".concat(JSON.stringify(null==t?void 0:t.data.errors))})},L=d.map(e=>null==e?void 0:e.academic_year);return L.filter((e,l)=>L.indexOf(e)===l),(0,s.jsx)(S.Z,{title:"EDIT - ".concat(null==n?void 0:null===(l=n.user)||void 0===l?void 0:l.username),open:t,onCancel:()=>a(!1),footer:!1,children:(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(g.Z,{layout:"vertical",onFinish:onSubmit,form:k,className:"bg-teal-700 rounded p-2",children:[(0,s.jsxs)("div",{className:"flex w-full gap-2",children:[(0,s.jsx)(g.Z.Item,{label:"First Name",name:"first_name",className:"w-full",rules:[{required:!1,message:"Please Input First Name"}],children:(0,s.jsx)(_.default,{placeholder:"".concat(null==n?void 0:n.first_name),type:"text"})}),(0,s.jsx)(g.Z.Item,{label:"Last Name",name:"last_name",className:"w-full",rules:[{required:!1,message:"Please Input Last Name"}],children:(0,s.jsx)(_.default,{placeholder:"".concat(null==n?void 0:n.last_name),type:"text"})})]}),(0,s.jsxs)("div",{className:"flex w-full gap-2",children:[(0,s.jsx)(g.Z.Item,{label:"Sex",name:"sex",className:"w-1/3",rules:[{required:!1,message:"Please Input Sex"}],children:(0,s.jsxs)(y.default,{placeholder:"".concat(null==n?void 0:n.sex),children:[(0,s.jsx)(F,{value:"Male",children:"Male"},"male"),(0,s.jsx)(F,{value:"Female",children:"Female"},"female")]})}),(0,s.jsx)(g.Z.Item,{label:"Place Of Birth",name:"pob",className:"w-2/3",rules:[{required:!1,message:"Please Input POB"}],children:(0,s.jsx)(_.default,{placeholder:"".concat(null==n?void 0:n.pob),type:"text"})}),(0,s.jsx)(g.Z.Item,{label:"Date Of Birth",name:"dob",className:"w-1/3",rules:[{required:!1,message:"Please Input DOB"}],children:(0,s.jsx)(b.Z,{format:"YYYY-MM-DD",placeholder:"".concat(null==n?void 0:n.dob)})})]}),(0,s.jsxs)("div",{className:"flex w-full gap-2",children:[(0,s.jsx)(g.Z.Item,{label:"Address",name:"address",className:"w-2/3",rules:[{required:!1,message:"Please Input Address"}],children:(0,s.jsx)(_.default,{placeholder:"".concat(null==n?void 0:n.address),type:"text"})}),(0,s.jsx)(g.Z.Item,{label:"Email",name:"email",className:"w-2/3",rules:[{required:!1,message:"Please Input Email Address"}],children:(0,s.jsx)(_.default,{placeholder:"".concat(null==n?void 0:n.email),type:"text"})})]}),(0,s.jsxs)("div",{className:"flex w-full gap-2",children:[(0,s.jsx)(g.Z.Item,{label:"Telephone",name:"telephone",className:"w-full",rules:[{required:!1,message:"Please Input Telephone"}],children:(0,s.jsx)(_.default,{placeholder:"".concat(null==n?void 0:n.telephone),type:"number"})}),i.includes("teacher")&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(g.Z.Item,{label:"Title",name:"title",className:"w-full",rules:[{required:!1,message:"Please Input Title"}],children:(0,s.jsx)(_.default,{placeholder:"".concat(null==n?void 0:n.title),type:"text"})})})]}),"teacher"==o&&(0,s.jsx)(g.Z.Item,{label:"IS HOD",name:"hod",rules:[{required:!1,message:"Please Select Level"}],children:(0,s.jsxs)(y.default,{placeholder:"".concat((null==n?void 0:n.hod)?"YES":"NO"),children:[(0,s.jsx)(F,{value:!0,children:"YES"},"Yes"),(0,s.jsx)(F,{value:!1,children:"NO"},"No")]})}),i.includes("teacher")&&(0,s.jsx)(g.Z.Item,{label:"About Me",name:"about",className:"w-full",rules:[{required:!1,message:"Please Input About"}],children:(0,s.jsx)(E,{placeholder:"".concat(null==n?void 0:n.about),rows:4,className:"w-full rounded"})}),(0,s.jsx)(g.Z.Item,{children:(0,s.jsx)(O.Z,{loading:q})})]})})})},U=t(60700),W=t(80432),A=t(21700),k=t(24033),PageStudents_TableProfiles=e=>{let{userprofiletype:l}=e,t=(0,k.useRouter)(),b=(0,I.I0)(),[g,_]=(0,v.useState)(!1),[S,y]=(0,v.useState)(null),[P,w]=(0,v.useState)([]),[O,C]=(0,v.useState)([]),[M,F]=(0,v.useState)(!1),[E,q]=(0,v.useState)(!1);(0,p.qT)(w,_),(0,v.useEffect)(()=>{b((0,A.Gn)()),b((0,A.nY)());let e=P.filter(e=>e.user.role==l);C(e)},[P,l,b]);let reset=()=>{_(!0),(0,j.l)(w,_)},D={...g&&{bgcolor:W.Z[500],"&:hover":{bgcolor:W.Z[800]}}};return(0,s.jsx)(f.Z,{title:"".concat("student"==l?"Student":"Lecturer"," List"),children:(0,s.jsxs)(a.Z,{sx:{overflow:"auto",width:{xs:"380px",sm:"auto"}},children:[(0,s.jsxs)(r.ZP,{container:!0,spacing:0,children:[(0,s.jsxs)(r.ZP,{item:!0,xs:12,children:[(0,s.jsx)(Z.Z,{fetching:g,reset:reset}),(0,s.jsx)(n.Z,{sx:{m:0,position:"relative"},children:(0,s.jsx)(i.Z,{"aria-label":"save",color:"primary",sx:D,onClick:()=>reset(),children:g?"Loading":(0,s.jsx)(s.Fragment,{children:O.length})})})]}),(0,s.jsx)(r.ZP,{item:!0,xs:12,children:(0,s.jsxs)(o.Z,{"aria-label":"simple table",sx:{whiteSpace:"nowrap",mt:0},children:[(0,s.jsx)(d.Z,{children:(0,s.jsxs)(c.Z,{children:[(0,s.jsx)(u.Z,{children:"student"==l?(0,s.jsx)(m.Z,{variant:"subtitle2",fontWeight:600,children:"Username / Matricle"}):(0,s.jsx)(m.Z,{variant:"subtitle2",fontWeight:600,children:"Username"})}),(0,s.jsx)(u.Z,{children:(0,s.jsx)(m.Z,{variant:"subtitle2",fontWeight:600,children:"Full Name"})}),"student"==l?(0,s.jsx)(u.Z,{children:(0,s.jsx)(m.Z,{variant:"subtitle2",fontWeight:600,children:"Specialty - Year - Level"})}):(0,s.jsx)(s.Fragment,{}),(0,s.jsx)(u.Z,{children:(0,s.jsx)(m.Z,{variant:"subtitle2",fontWeight:600,children:"Telephone"})}),(0,s.jsx)(u.Z,{children:(0,s.jsx)(m.Z,{variant:"subtitle2",fontWeight:600,children:"Email"})}),(0,s.jsx)(u.Z,{align:"center",children:(0,s.jsx)(m.Z,{variant:"subtitle2",fontWeight:600,children:"Action"})})]})}),(0,s.jsx)(h.Z,{children:O.map(e=>{var a,r,i,o,d,h,f,v,p,j,Z,g,_;return(0,s.jsxs)(c.Z,{children:[(0,s.jsx)(u.Z,{children:"student"==l?(0,s.jsxs)(m.Z,{sx:{fontSize:"15px",fontWeight:"500"},children:[e.user.username," / ",null===(a=e.user)||void 0===a?void 0:a.matricle]}):(0,s.jsx)(m.Z,{variant:"subtitle2",fontWeight:600,children:e.user.username})}),(0,s.jsx)(u.Z,{children:"student"==l?(0,s.jsxs)(m.Z,{variant:"subtitle2",fontWeight:600,children:[null===(r=e.user)||void 0===r?void 0:r.first_name," ",null===(i=e.user)||void 0===i?void 0:i.last_name]}):(0,s.jsxs)(m.Z,{variant:"subtitle2",fontWeight:600,children:[null===(o=e.user)||void 0===o?void 0:o.title,". ",null===(d=e.user)||void 0===d?void 0:d.first_name," ",null===(h=e.user)||void 0===h?void 0:h.last_name]})}),"student"==l&&(0,s.jsx)(u.Z,{children:(0,s.jsx)(m.Z,{sx:{fontSize:"15px",fontWeight:"500"},children:e.specialty?"".concat(null===(v=e.specialty)||void 0===v?void 0:null===(f=v.main_specialty)||void 0===f?void 0:f.specialty_name," ").concat(null===(p=e.specialty)||void 0===p?void 0:p.academic_year," L").concat(null===(Z=e.specialty)||void 0===Z?void 0:null===(j=Z.level)||void 0===j?void 0:j.level):""})}),(0,s.jsx)(u.Z,{children:(0,s.jsx)(m.Z,{color:"textSecondary",variant:"subtitle2",fontWeight:400,children:null===(g=e.user)||void 0===g?void 0:g.telephone})}),(0,s.jsx)(u.Z,{children:(0,s.jsx)(m.Z,{color:"textSecondary",variant:"subtitle2",fontWeight:400,children:null===(_=e.user)||void 0===_?void 0:_.email})}),(0,s.jsx)(u.Z,{align:"left",children:(0,s.jsxs)(x.Z,{justifyItems:"center",direction:"row",spacing:1,justifyContent:"center",children:[(0,s.jsx)(n.Z,{onClick:()=>{b((0,A.Ox)(e)),t.push("/AdministrationPages/AccountSettings")},variant:"contained",disableElevation:!0,color:"primary",children:"View"}),(0,s.jsx)(n.Z,{onClick:()=>{y(e),q(!0)},variant:"contained",disableElevation:!0,color:"primary",children:"Delete"})]})})]},e.id)})})]})})]}),(0,s.jsx)(Modals_EditProfileFormModal,{showModal:M,setShowModal:F,record:S,reset:reset,userRole:l}),(0,s.jsx)(U.Z,{showModal:E,setShowModal:q,record:S,url:N.Xx,record_name:(null==S?void 0:S.user.username)?S.user.username:"",reset:reset})]})})}}}]);